---
title: 内容获取
description: 内容获取
copied-description: true
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '638'
ht-degree: 0%

---

# 内容获取 {#content-acquisition}

当消费者从网站或CDN获取受保护的内容文件时，消费者还必须获取包含密钥的许可证，以在视频可以播放之前对视频进行解密。 以下步骤说明了运行Flash Player或Adobe AIR的计算机如何访问受保护内容的常见工作流程：

1. 消费者访问零售商的网站，并选择要观看的视频。 消费者尝试使用Flash Player或Adobe AIR应用程序将受保护的视频下载或流式传输到其计算机。

   如果这是使用者首次尝试使用此特定计算机访问受保护的内容，则必须首先按照步骤2中所述对Flash Player或Adobe AIR运行时进行个性化。 如果运行时客户端已个性化，则会按照步骤3中的说明执行获取许可证的过程。

1. Flash Player或Adobe AIR运行时客户端获取唯一数字证书(称为 *计算机证书*)从Adobe托管的服务器中访问。

   分配唯一证书的此过程称为 *个性化*. 个性化可唯一标识用于播放内容的计算机和Flash Player或Adobe AIR运行时。

   个性化过程允许将下载的许可证绑定到安装客户端的特定计算机。 每台计算机都有一个唯一的计算机凭据（计算机私钥和计算机证书）。 如果某个特定客户遭到破坏，该客户可能会被撤销，并被禁止获取新内容的许可证。

1. 客户端在开始下载受保护内容或将其流式传输到消费者的计算机时解析该内容，并从嵌入在文件中的DRM元数据中提取零售商许可证服务器的URL。

   DRM元数据通常与内容分开，例如嵌入在随附的清单文件中或作为二进制blob，但也可以嵌入在内容文件中。 客户端在指定的URL上联系许可证服务器，并获取许可证（如下面的步骤4中所述）。
1. 客户端从零售商的许可证服务器获取许可证。

   在许可证获取期间，客户端发送标识所请求内容的信息( *DRM元数据*)和发送到零售商许可证服务器的计算机证书（标识消费者的计算机）。 使用传输公钥对发送到服务器的许可证请求进行加密，该密钥也包含在DRM元数据中。

   许可证服务器 — 可以集成到零售商的计费和身份验证基础结构中 — 可以执行业务规则检查，以验证用户是否有权查看请求的内容。 如果业务规则允许，许可证服务器将颁发包含内容加密密钥的许可证以解密内容以及与用户的帐户关联的使用规则。 为了处理许可证请求，许可证服务器使用其传输私钥解密该请求。 使用许可证服务器私钥解密元数据中的CEK，并重新加密以将许可证绑定到发出请求的设备。 使用许可证服务器私钥对许可证进行签名。 许可证响应使用传输私钥进行签名，并在返回到客户端之前进行加密。

   如果许可证允许，客户端将存储许可证以启用 *脱机访问* 到许可证上。 许可证缓存允许使用者查看受保护的内容，而无需在每次想要查看内容时重新获取许可证。

1. 一旦Flash Player或Adobe AIR运行时客户端拥有许可证，该客户端就会从许可证中提取CEK，消费者可以查看他们有权访问的内容。

   <!--<a id="fig_s43_gc2_44"></a>-->

   ![](assets/FMRMS_fig01_web.png)

   上一个示例只显示了一个可能的工作流。 或者，您可以使用带有主动内容下载的工作流，其中许可证获取将在以后进行。 另一种选择是实施预订购工作流，其中在访问内容之前进行许可证获取。
