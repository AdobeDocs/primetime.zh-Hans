---
title: 基于时间的规则
description: 基于时间的规则
copied-description: true
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '523'
ht-degree: 0%

---

# 基于时间的规则 {#time-based-rules}

Primetime DRM使用基于时间的许可证限制的“软实施”。 如果在视频播放期间右侧到期，则Primetime DRM的默认行为是在下次重新创建视频流之前（通过调用）不限制播放 `Netstream.stop()` 和 `Netstream.play()`)。

虽然软强制是默认行为，但您也可以通过执行以下任务之一来启用硬强制：

* 让您的视频播放器定期轮询许可证，以确保时间限制未过期。 这可以通过调用 `DRMManager.loadVoucher(LOCAL_ONLY).` 错误代码指示本地存储的许可证不再有效。
* 每当用户单击时 **[!UICONTROL Pause]**，您可以记录当前视频时间戳，然后调用 `Netstream.stop()`. 当用户单击“播放”按钮时，您可以搜索到录制的位置，然后调用 `Netstream.play()`.

## 开始日期 {#start-date}

开始日期指定许可证的有效日期。

示例用例：使用绝对日期在资产可用日期之前颁发内容许可证，或强制执行“禁止”期限。

## 结束日期 {#end-date}

结束日期指定许可证到期的截止日期。

示例用例：使用绝对到期日期反映分发权限的结束。

## 相对结束日期 {#relative-end-date}

相对结束日期指定了许可证到期日期，该日期与包装日期无关，而是与许可证签发日期相关。

示例用例：在自动打包过程中，对一系列视频使用带有此选项的单个Primetime DRM策略，将到期日期设置为相对于打包日期的30天。

## 许可证缓存持续时间{#license-caching-duration}

许可证缓存持续时间指定可在客户端的本地许可证存储区的磁盘上缓存许可证的时长，而无需从许可证服务器重新获取。 或者，您可以指定绝对日期和时间，在超过该日期和时间后，将不再缓存许可证。

一旦缓存过期日期，许可证就不再有效，客户端必须向许可证服务器请求新许可证。

示例用例：使用许可证缓存持续时间指定对特定许可证有效的固定时间量，例如在租赁用例中。 您可以指定30天租用（含许可证缓存）以指示使用内容的总许可证持续时间。

## 播放窗口 {#playback-window}

播放窗口指定许可证在首次用于播放受保护内容后有效的持续时间。

示例用例：某些业务模型允许30天的租赁期，但是，一旦播放开始，播放必须在48小时内完成。 在本例中，许可证的48小时持续时间是播放窗口。

**从版本5.3开始**  — 播放窗口还支持启用或禁用“硬停止”选项，该选项指示播放的解密上下文在播放窗口到期时停止（启用）还是尽管过期仍继续（禁用）。

>[!NOTE]
>
>如果与“播放窗口”结合使用，“硬停止”选项无法正确用于“播放窗口”（不允许“播放窗口”）。 使用播放窗口而不安全停止播放内容确实遵守播放窗口限制。
