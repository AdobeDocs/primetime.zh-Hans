---
title: 基于时间的规则
description: 基于时间的规则
copied-description: true
translation-type: tm+mt
source-git-commit: 89bdda1d4bd5c126f19ba75a819942df901183d1
workflow-type: tm+mt
source-wordcount: '523'
ht-degree: 0%

---


# 基于时间的规则{#time-based-rules}

Primetime DRM对基于时间的许可限制采取“软强制”措施。 如果在视频播放期间某个时间权限过期，则Primetime DRM的默认行为是在下次重新创建视频流之前（通过调用`Netstream.stop()`和`Netstream.play()`）不限制播放。

虽然软强制是默认行为，但您也可以通过执行下列任务之一启用硬强制：

* 让您的视频播放器定期轮询许可，以确保没有任何时间限制过期。 可通过调用`DRMManager.loadVoucher(LOCAL_ONLY).`来完成此操作。错误代码指示本地存储的许可证不再有效。
* 每当用户单击&#x200B;**[!UICONTROL Pause]**&#x200B;时，您都可以录制当前视频时间戳，然后调用`Netstream.stop()`。 当用户单击“播放”按钮时，您可以搜索录制的位置，然后调用`Netstream.play()`。

## 开始日期{#start-date}

开始日期指定许可证有效的日期。

示例用例：使用绝对日期在资产发布日期之前颁发内容许可证，或执行“禁运”期。

## 结束日期{#end-date}

结束日期指定许可证到期的日期。

示例用例：使用绝对到期日来反映分发权限的终止。

## 相对结束日期{#relative-end-date}

相对结束日期指定许可证到期日期，该日期表示为相对于打包日期，而不是相对于许可证发放日期。

示例用例：在自动打包流程中，对一系列视频使用带有此选项的单一Primetime DRM策略，将过期日期设置为相对于打包日期的30天。

## 许可证缓存持续时间{#license-caching-duration}

许可证缓存持续时间指定许可证可以在客户端的本地许可证存储中的磁盘上缓存多长时间，无需从许可证服务器重新获取。 或者，您也可以指定一个绝对日期和时间，在此日期和时间之后将无法再缓存许可证。

缓存过期日期过后，该许可证将不再有效，并且客户端必须从许可证服务器请求新的许可证。

示例用例：使用许可证缓存持续时间指定特定许可证的固定有效时间，例如在租赁用例中。 您可以指定30天租赁（带有许可证缓存）以指示使用内容的总许可证持续时间。

## 播放窗口{#playback-window}

播放窗口指定许可证在首次用于播放受保护内容之后有效的持续时间。

示例用例：某些业务模型允许租用30天，但是，一旦开始播放，播放必须在48小时内完成。 在这种情况下，48小时的许可证持续时间是播放窗口。

**从5.3前进**  — 播放窗口还支持启用或禁用硬停止的选项，此选项指示播放的解密上下文应在播放窗口过期时停止（已启用），还是在过期时继续（已禁用）。

>[!NOTE]
>
>如果与“播放窗口”一起使用，则硬停止选项无法与“播放窗口”一起正常工作（播放窗口将不适用）。 在不安全停止的情况下使用“播放”窗口播放内容时会遵守播放窗口限制。