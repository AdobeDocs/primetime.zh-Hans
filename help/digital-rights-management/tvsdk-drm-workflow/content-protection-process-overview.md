---
title: 许可证获取流程概述
description: 许可证获取流程概述
copied-description: true
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '339'
ht-degree: 0%

---

# 许可证获取流程概述{#license-acquisition-process-overview}

以下各节使用ActionScript3 (AS3)代码示例介绍了如何使应用程序能够在Primetime DRM的保护下播放内容。 在适用的情况下，将显示移动平台上本机应用程序与此工作流的细微差异。 但是，Primetime DRM工作流在所有平台上都非常相似，因此您对AS3代码的理解将使对其他平台的外推变得相当简单。

**许可证获取流程：**

1. 获取受保护内容的DRM元数据。
1. 检查许可证是否可在本地使用：

   * 如果许可证在本地可用，请加载许可证并转到步骤6。
   * 如果许可证在本地不可用，请继续执行步骤3。

1. 如果需要进行身份验证，请选中：

   * 如果需要进行身份验证，请从用户处获取身份验证凭据，并将其传递给许可证服务器。
   * 如果不需要身份验证，请转到步骤6。

1. 如果需要设备域注册，请加入设备域。
1. 如果需要身份验证并且身份验证现已完成，请从许可证服务器下载许可证。
1. 播放内容。

如果未发生错误并且用户已成功获得查看内容的授权，Primetime将发送 `DRMStatusEvent` 对象和应用程序开始播放。 此 `DRMStatusEvent` 对象保存相关的许可证信息，用于标识用户的策略和权限。 例如， `DRMStatusEvent` 可以保存有关内容是否可以离线使用、许可证过期时间等的信息。

应用程序可以使用许可证信息向用户通知其策略的状态。 例如，应用程序可以在状态栏中显示用户查看内容时剩余的天数。 如果用户被允许脱机访问，则缓存许可证，并将加密的内容下载到用户的计算机。 在许可证缓存持续时间中定义的持续时间内，可访问内容。 事件中的detail属性包含 `DRM.voucherObtained`. 应用程序可决定本地存储内容的位置，以便内容可以离线使用。 您还可以使用 `DRMManager` 类。
