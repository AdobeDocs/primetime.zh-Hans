---
description: 当缺少某个区段时，例如当某个特定区段下载失败时，会尝试通过各种故障转移尝试进行恢复。 如果无法恢复，则会发出错误。
title: 缺少区段故障转移
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '287'
ht-degree: 0%

---

# 缺少区段故障转移{#missing-segment-failover}

当缺少某个区段时，例如当某个特定区段下载失败时，会尝试通过各种故障转移尝试进行恢复。 如果无法恢复，则会发出错误。

如果服务器上缺少区段，例如，由于清单文件不存在、无法下载区段等，TVSDK将尝试通过尝试以下选项进行故障转移：

1. 尝试在变量文件中以相同的比特率故障转移到同一段。
1. 在同一文件中切换到备用比特率（ABR交换机）。
1. 在每个可用变量中循环访问每个可用比特率。
1. 跳过该区段并发出警告。

当TVSDK无法获取替代区段时，它会触发 `CONTENT_ERROR` 错误通知。 此通知包含带有代码的内部通知 `DOWNLOAD_ERROR` 代码。 如果存在问题的流是备用音轨，则生成 `AUDIO_TRACK_ERROR` 错误通知。

如果视频引擎连续无法获取区段，则会将连续区段跳过限制为5，之后将停止播放并发出 `NATIVE_ERROR` 代码为5。

>[!NOTE]
>
>在发生故障转移时，不会考虑自适应比特率(ABR)控制参数。 这是因为故障转移机制设计为将任何当前可用的播放列表（无论其比特率配置文件如何）用作备份流。
>
>在故障切换操作期间，可以有一个配置文件交换机。 如果在下载其中一个播放列表段期间发生错误，则会忽略ABR控制参数，例如最小/最大允许比特率。
