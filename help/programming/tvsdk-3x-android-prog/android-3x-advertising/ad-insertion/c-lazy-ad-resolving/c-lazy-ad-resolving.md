---
description: 广告解析和广告加载可能会给等待播放到开始的用户带来无法接受的延迟。 延迟广告加载和延迟广告解析功能可减少此启动延迟。 3.0版本中的延迟广告解决已发生显着变化。 在3.0之前的延迟广告加载中，广告分辨率分为两个步骤，仅解析PREPARED状态之前的预滚动广告和PREPARED状态之后的中间滚动和后滚动广告。 此情况已更改，广告中断现在以在广告中断位置之前的指定间隔解析。
keywords: 延迟；广告解析；广告加载
title: 及时的广告解决
translation-type: tm+mt
source-git-commit: 89bdda1d4bd5c126f19ba75a819942df901183d1
workflow-type: tm+mt
source-wordcount: '606'
ht-degree: 0%

---


# 概述{#just-in-time-ad-resolving-overview}

广告解析和广告加载可能会给等待播放到开始的用户带来无法接受的延迟。 延迟广告加载和延迟广告解析功能可减少此启动延迟。 3.0版本中的延迟广告解决已发生显着变化。 在3.0之前的延迟广告加载中，广告分辨率分为两个步骤，仅解析PREPARED状态之前的预滚动广告和PREPARED状态之后的中间滚动和后滚动广告。 此情况已更改，广告中断现在以在广告中断位置之前的指定间隔解析。

* 基本广告解析和加载流程：

   1. TVSDK下载一个清单（播放列表），并且&#x200B;*resolves*&#x200B;所有广告。
   1. TVSDK *加载*&#x200B;所有广告并将其放置在时间轴上。
   1. TVSDK将播放器移至PREPARED状态，内容播放开始。

   播放器使用清单中的URL获取广告内容（创意），确保广告内容采用TVSDK可播放的格式，TVSDK将广告放在时间轴上。 解析和加载广告的这一基本过程可能会给等待播放其内容的用户带来无法接受的长时间延迟，尤其是当清单包含多个广告URL时。

* *延迟广告加载*:

   1. TVSDK下载播放列表，并且&#x200B;*resolves*&#x200B;解析所有广告。
   1. TVSDK *加载*&#x200B;前滚广告，将播放器移入PREPARED状态，内容播放开始。
   1. TVSDK *加载*&#x200B;其余广告，并在播放时将其放在时间轴上。

   此功能通过在加载所有广告之前将播放器置于PREPARED状态，改进了基本流程。

* *延迟广告解决*:

   1. TVSDK下载播放列表。
   1. TVSDK解析并加载任何前置广告，将播放器移入PREPARED状态，内容播放开始。
   1. TVSDK根据以下计算逐个解析其余的广告：

      `AdvertisingMetadata::getDelayAdLoadingTolerance() + PlayBufferTime::playBufferTime + the value defined in EXT-X-TARGETDURATION`

      默认情况下，对于目标持续时间为6秒的内容，这将是5.0 + 30.0 + 6.0秒（41秒）

   1. 如果广告在开始位置后10秒内出现中断，则在PREPARED状态之前，将与前置广告一起解决广告。

>[!IMPORTANT]
>
>**懒惰广告解决应考虑的因素：**
>
>* 仅支持具有SERVER_MAP和MANIFEST_CAIS模式的VOD流的延迟广告解决。
>* 默认情况下未启用延迟广告解析。 如果禁用，则在播放开始之前，所有广告都会解析在VOD流上。
>* “延迟广告解析”与“即时启动”功能不兼容。 有关“即时打开”的详细信息，请参阅“即时打开”。
>* 通过“延迟广告解决”，当在广告中断上向前搜索时，在搜索过程中将解析与搜索位置最接近的广告中断。
>* 在延迟广告解析中，如果同时存在多个广告分段(VMAP)，则它们将同时解析。
>* 不建议将*setDelayAdLoadingTolerance()*的值降低到默认值（5秒）以下。 这样做会导致播放器不必要地“缓冲”。
>* 延迟广告解决不会影响前置广告。
>* Auditude-Plugin当前支持懒惰广告解析。 如果您使用自定义解析程序，建议不要将&#x200B;*setDelayAdLoading*&#x200B;设置为true。

>


