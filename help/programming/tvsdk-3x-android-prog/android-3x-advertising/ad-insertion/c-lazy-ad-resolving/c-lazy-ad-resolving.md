---
description: 广告解析和广告加载可能会导致等待播放开始的用户出现不可接受的延迟。 延迟广告加载和延迟广告解析功能可以减少此启动延迟。 延迟广告解析在3.0版本中发生了显着变化。 在3.0之前的延迟广告加载中，广告分辨率分为两个步骤，仅在PREPARED状态之前解析前置广告，并在PREPARED状态之后解析中置广告和后置广告。 这种情况已更改，现在广告时间是在广告时间位置之前的指定时间间隔解析的。
keywords: 延迟；广告解析；广告加载
title: 及时广告解决
exl-id: 7ce0dcac-859b-4570-a31b-4ea1e10ccf95
source-git-commit: be43bbbd1051886c8979ff590a3197b2a7249b6a
workflow-type: tm+mt
source-wordcount: '606'
ht-degree: 0%

---

# 概述 {#just-in-time-ad-resolving-overview}

广告解析和广告加载可能会导致等待播放开始的用户出现不可接受的延迟。 延迟广告加载和延迟广告解析功能可以减少此启动延迟。 延迟广告解析在3.0版本中发生了显着变化。 在3.0之前的延迟广告加载中，广告分辨率分为两个步骤，仅在PREPARED状态之前解析前置广告，并在PREPARED状态之后解析中置广告和后置广告。 这种情况已更改，现在广告时间是在广告时间位置之前的指定时间间隔解析的。

* 基本广告解析和加载流程：

   1. TVSDK下载清单（播放列表）和 *解析* 所有广告。
   1. TVSDK *加载* 所有广告并将其放置在时间轴上。
   1. TVSDK将播放器移到“已准备”状态，并开始播放内容。

   播放器使用清单中的URL获取广告内容（创意），确保广告内容采用TVSDK可以播放的格式，并且TVSDK将广告放在时间轴上。 这种解析和加载广告的基本流程可能会导致等待播放其内容的用户出现不可接受的长延迟，尤其是当清单包含多个广告URL时。

* *延迟广告加载*：

   1. TVSDK下载播放列表和 *解析* 所有广告。
   1. TVSDK *加载* 前置广告、将播放器移到“已准备”状态，并开始播放内容。
   1. TVSDK *加载* 剩余的广告，并在播放时将其放在时间轴上。

   此功能通过在加载所有广告之前将播放器置于“已准备”状态来改进基本过程。

* *延迟广告解析*：

   1. TVSDK将下载播放列表。
   1. TVSDK解析并加载任何前置广告，将播放器移到“已准备”状态，并开始内容播放。
   1. TVSDK解析并根据以下计算分别解析和其余每个广告时间：

      `AdvertisingMetadata::getDelayAdLoadingTolerance() + PlayBufferTime::playBufferTime + the value defined in EXT-X-TARGETDURATION`

      默认情况下，对于具有6秒目标持续时间的内容，这将是5.0 + 30.0 + 6.0秒（41秒）

   1. 如果广告时间发生在开始位置的10秒内，则它将在“已准备”状态之前与前置广告一起被解析。

>[!IMPORTANT]
>
>**考虑懒惰广告解决的因素：**
>
>* 只有使用模式SERVER_MAP和MANIFEST_CUE的VOD流才支持延迟广告解析。
>* 默认情况下不启用延迟广告解析。 如果禁用，则在播放开始之前在VOD流上解析所有广告。
>* 延迟广告解析与立即启用功能不兼容。 有关立即打开的详细信息，请参阅立即打开。
>* 使用延迟广告解决时，当在广告时间上向前搜寻时，将在搜寻期间解决距离搜寻位置最近的广告时间。
>* 使用延迟广告解析，如果同时存在多个广告时间(VMAP)，则将同时解析它们。
>* 不建议将*setDelayAdLoadingTolerance() *的值减小到默认值（5秒）以下。 这样做可能会导致播放器不必要的“缓冲”。
>* 延迟广告解析不会影响前置广告。
>* Auditude-Plugin当前支持延迟广告解析。 建议不要设置 *setDelayAdLoading*&#x200B;设置为true。
>

