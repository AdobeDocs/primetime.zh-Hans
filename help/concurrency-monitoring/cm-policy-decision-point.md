---
title: 策略决策点
description: 策略决策点
source-git-commit: ac0c15b951f305e29bb8fa0bd45aa2c53de6ad15
workflow-type: tm+mt
source-wordcount: '725'
ht-degree: 0%

---


# 策略决策点 {#policy-desc-pt}

## 域模型 {#domain-model}

本页旨在作为策略的不同用例和实施的参考。 我们建议贵公司亦参阅 [术语表](/help/concurrency-monitoring/cm-glossary.md) 术语定义文档的一部分。

A **租户** 所有者 **应用程序** 希望强制执行 **策略**. **客户端应用程序** 必须配置有 **应用程序标识** (Adobe提供)。

然后，租户将每个应用程序与一个或多个策略相关联，这些策略由租户创建或由其他人创建和共享。 策略可以在多个租户之间链接。

此 **主题活动** 包含向特定主题并发监控报告的所有流（无论应用程序如何）。

当一个流被授权用于给定主题时，系统将首先检查为创建该流的应用程序定义的所有策略。

然后，我们需要收集所有适用政策的 **相关活动** 将被传递到规则中。 此 **相关活动** 如果策略P满足以下条件，则它仅包括流S：

**流“S”由在其策略中包括策略“P”的应用程序启动。**

![流“S”由在其策略中包括策略“P”的应用程序启动。](assets/pdp-domain-model.png)

## 模拟运行用例 {#dry-run-use-cases}

下面的演练旨在根据某些用例验证模型。 我们将逐步做到这一点，从基本设置开始，并以各种方式增加复杂性。

### 1.一个租户。 一个应用程序。 一个政策。 一个流 {#onetenant-oneapp-onepolicy-onestream}

我们将从单个租户开始，其中关联单个应用程序和单个策略。 假设该策略声明，任何用户最多只能有一个活动流（最新的流允许播放）。

启动流后，活动将仅包含该流并允许播放。

![一个租户。 一个应用程序。 一个政策。 一个流](assets/onetenant-app-policy-stream.png)


### 2.一个租户。 一个应用程序。 一个政策。 两股。 {#onetenant-oneapp-onepolicy-twostreams}

一旦启动第二个流（由同一主题使用同一应用程序），用于验证的活动将包含两者 **s1** 和 **s2**.

超过限制，因为策略规定只允许播放一个流，因此我们将仅允许播放最新的流(**s2**)播放。

![一个租户。 一个应用程序。 一个政策。 两股。](assets/tenant-app-policy-twostream.png)

>[!NOTE]
>
>这些图显示了用户活动上的系统视图。 对于流初始化尝试，访问决策将包含在响应中。 对于活动流，将在心跳响应中返回决策。

### 3.两个租户。 两个应用程序。 一个政策。 两股。 {#twotenant-twoapp-onepolicy-twostreams}

现在，假设一个新租户希望在其应用程序中实施相同的策略：

![两个租户。 两个应用程序。 一个政策。 两股。](assets/onepolicy-twotenant-app-stream.png)

由于两个租户由同一政策联系，因此例证2所述的情况适用于本例及 **s3** 可以播放，因为它是最新的流。

### 4.两个租户。 三个应用程序。 两种策略。 两股。 {#twotenants-threeapps-twopolicies-twostreams}

现在，假设第二个租户部署了一个新应用程序，并且想要定义一个将在两个租户之间共享的新策略 **应用程序2** 和 **应用程序3**.

![两个租户。 三个应用程序。 两种策略。 两股。](assets/twotenant-policies-streams-threeapps.png)

此时，活动流 **s3** 和 **s4** 都允许。 对象 **s3**，使用策略 **P1** 经过评估，系统将仅计数 **s3** 作为 **相关活动** (**s4** 与政策毫无关系 **P1**)因此不存在违规。

策略 **P2** 应用于两个流，它将同时包含这两个流 **s3** 和 **s4** 作为相关活动。 由于此活动在两个流的范围内，因此允许这两个流。

### 5.两个租户。 三个应用程序。 两种策略。 三流。 {#twotenants-threeapps-twopolicies-threestreams}

现在，假定使用执行新的流初始化尝试 **应用程序2**：

![两个租户。 三个应用程序。 两种策略。 三流。](assets/twotenants-policies-threeapps-streams.png)

**s5** 允许开始者 **P1** （允许较新的流接管），但被拒绝 **P2**，因此不会启动。

如果尝试使用app3初始化某个流，也会发生同样的情况：同一策略P2将拒绝对该流的访问。

![](assets/stream-init-attempted-app3.png)

现在，我们来看看如果用户尝试使用app1创建新流会发生什么情况：

![](assets/new-stream-with-app1.png)

应用程序app1与策略没有任何关系 **P2**，因此它仅应用策略 **P1**：允许新流启动并拒绝旧流(**s3** 在本例中)。

