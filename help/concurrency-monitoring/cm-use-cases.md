---
title: 用例
description: 并发监控中的用例。
source-git-commit: ac0c15b951f305e29bb8fa0bd45aa2c53de6ad15
workflow-type: tm+mt
source-wordcount: '387'
ht-degree: 0%

---


# 用例 {#use-cases}

流计数服务的主要用例是计数用户观看的并发视频流的数量，并提供有关其对于同一帐户ID的并发使用的决策。

为了监视订阅者的使用情况，需要一种集中服务，这种服务可以汇总用户活动，而不管是在程序员的网站或应用程序、MVPD的内容门户还是联合属性上进行。

此集中化服务支持的主要用例应为：

1. 只要订阅者开始观看视频，应用程序就可以 **初始化流会话** 和开始 **报告活动** 数据。
1. 在同一中心服务中，另一个实例将接收 ***CM决策***  — 如果应用程序在CM服务中注册了一个或多个策略，则服务将根据当前活动做出访问决策。


## 创建会话 {#create-session}

此API调用允许客户端在用户按“播放”按钮观看某些内容时创建新的CM会话。 服务器响应将包含用于保持活动状态的新流URL（包含流ID）以及流超时时间。 客户端应用程序应通过心率报告活动。 会话初始化调用必须以键值对的形式包含元数据，作为表单数据（或查询字符串参数）发送。 此外，响应还将包括指示播放是否“符合策略”的标志。 如果不是，则不允许播放。

## 报告活动 {#reporting-activity}

创建会话后，应用程序需要定期发送心跳，以便该流保持活动状态。 此外，建议客户端应用程序在用户停止播放后停止流，以使流在超时前不会计为活动状态。

心率调用的响应可以允许客户端应用程序继续视频播放（当它符合策略时），也可以指示它停止视频播放。 如果视频流不兼容，客户端应用程序必须停止它。 响应将提供信息以便客户端应用程序显示错误消息和/或用户继续播放的可用操作。
